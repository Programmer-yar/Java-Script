<!DOCTYPE html>
<html>
<body>
<h1>Using Event Listeners with Event Object</h1>
<h2><em>element.addEventListener('event', function_name [, Boolean]);</em></h2>
<p> Deal with more than one function at a time (More advanced) </p>

<p id="test1"></p>
<p id="test2"></p>
<p id="test3"></p>
<p id="test4"></p>
<p id="test5"></p>

<form method="post" action="http://www.example.org/register">
	<label for="username">Create a username: </label>
	<input type="text" id="username"/>
	<div id="feedback"></div>

	<label for="password">Create a password: </label>
	<input type="password" id="password" />
	<div id="pass"></div>
	<input type="submit" value="Sign up!" />
</form>

<script>
  function checkLength(e, minLength) {
    var el;
    if (!e) {
      e = window.event;
    }

    document.getElementById('test1').innerHTML = e;

    el = e.target || e.srcElement;  //gets target of event
      //el.nextSibling; give fault

    document.getElementById('test2').innerHTML = el;
    document.getElementById('test3').innerHTML = elMsg;
    if (el.value.length < minLength) {
      elMsg.innerHTML = 'Username is just '+el.value.length+' charcters!';
    } 
    else {
      elMsg.innerHTML = '';
    }
  }


  
  var elUsername = document.getElementById('username');
  var elMsg = document.getElementById('feedback');
  if (elUsername.addEventListener) {  //checks browser support for event listener

    elUsername.addEventListener('blur', function(e){
      checkLength(e, 5);}, false);
  }

  else {
    elUsername.attachEvent('onblur', function(e){ checkLength(e, 5);
    });
  }

</script>
</body>
</html> 